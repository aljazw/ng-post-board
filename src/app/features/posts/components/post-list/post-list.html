<div class="p-4 w-2/3 mx-auto mt-10">
    <h1 class="text-xl font-semibold">Post Management</h1>
    <span class="flex justify-between items-center mb-4">
        <p class="mat-text-disabled text-sm">View, create, and manage posts and comments</p>
        <button matFab extended class="custom-fab" (click)="openPostDialog(AddPostDialog)">
            <mat-icon>add</mat-icon>
            New Post
        </button>
    </span>

    @if (!loading()) {
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            @for (post of posts; track post.id) {
                <mat-card class="p-4">
                    <h2 class="font-bold">{{ post.title }}</h2>
                    <span class="flex items-center gap-1 mat-text-disabled">
                        <mat-icon inline="true" fontIcon="calendar_today"></mat-icon>
                        <p> {{ post.createdAt | date: 'MMM d, y' }}</p>
                    </span>
                    
                    <p class="mt-2">{{ post.content }}</p>
                    <p class="mt-2 mat-text-on-surface-variant text-sm">By {{ post.author }}</p>

                    <div class="flex justify-between mt-4 items-center w-full text-xl">
                        <button matFab extended class="comment-fab" (click)="openPostDialog(CommentListDialog, post)">
                            <mat-icon fontSet="material-symbols-outlined">chat_bubble</mat-icon>
                            Comments
                        </button>
                        <span class="ml-4">
                            <button (click)="openPostDialog(EditPostDialog, post)" matIconButton>
                                <mat-icon fontSet="material-symbols-outlined">edit_square</mat-icon>
                            </button>
                            <button matIconButton (click)="openPostDialog(DeletePostDialog, post)" >
                                <mat-icon class="mat-text-error" fontSet="material-symbols-outlined">delete</mat-icon>
                            </button>
                        </span>
                    </div>
                </mat-card>
            }
        </div>
        <mat-paginator
            [length]="totalPosts()"
            [pageSize]="pageSize"
            [pageIndex]="currentPage"
            [pageSizeOptions]="[6, 8, 12]"
            (page)="onPageChange($event)"
            [showFirstLastButtons]="true"
            class="mt-4">
        </mat-paginator>
    
    } @else {
        <span class="flex justify-center items-center mt-20">
            <mat-spinner [diameter]="50"></mat-spinner>
        </span>
    }
        
</div>
